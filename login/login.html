<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="../files/img/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Login</title>
    <link href="../files/css/Login.css" rel="stylesheet">
</head>
<body>
<div class="form">
    <h1>Login</h1>

    <form action="login.php" id="login" method="post">
        <label>E-Mail:<br>
            <input id="email" name="email" onkeyup="check_up3()" placeholder="E-mail" required type="email"
                   value="lukas-biermann@fahr-zur-hoelle.org">
        </label><span id="statusEmail"></span><br><br>
        <label>Passwort:<br>
            <input id="password" name="password" placeholder="Passwort" required type="password"
                   value="Test#2019"></label><br>

        <p>Passwort vergessen? <a href="loginforgotpass.html">Zurücksetzen</a></p>
        <input id="btnLogin" name="btnLogin" type="submit" value="Anmelden">
    </form>
    <p>Sie haben noch kein Konto? <a href="loginNewAccount.html">Erstellen sie sich jetzt eins</a></p>

</div>
</body>
<script>
    let resetPass = document.getElementById("login");
    let statusEmail = document.getElementById('statusEmail');
    resetPass.addEventListener('submit', function (evt) {
        if (!(emailIsValid(document.querySelector("#email").value))) {
            statusEmail.style.color ="red";
            statusEmail.innerHTML ="<strong>Gültige E-mail eingeben</strong>";
            evt.preventDefault();
        }
    });
    window.onload=function mailOrPass() {
        let err = getURLParameter('err');
        if (err === "1") {
            let feedback = document.getElementById("statusEmail");
            feedback.style.color = "red";
            feedback.innerHTML = "<strong>E-Mail oder Passwort falsch</strong>"
        }
        let success =  getURLParameter('success');
        if(success==="logout"){
            window.location="../login/logout.html"

        }
    };

        function emailIsValid(email) {
            return (/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email))
        }

        function check_up3() {
            statusEmail.innerHTML = "";

    }
    function getURLParameter(name) {
        let value = decodeURIComponent((RegExp(name + '=' + '(.+?)(&|$)').exec(location.search) || [, ""])[1]);
        return (value !== 'null') ? value : false;
    }
</script>
</html>